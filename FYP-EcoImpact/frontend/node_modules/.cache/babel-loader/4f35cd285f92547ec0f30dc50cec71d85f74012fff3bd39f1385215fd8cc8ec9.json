{"ast":null,"code":"var _jsxFileName = \"D:\\\\Fyp\\\\FYP-EcoImpact\\\\frontend\\\\src\\\\pages\\\\Simulate.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport cyberEarthImage from '../images/cyberearth.png';\nimport { apiPost, getToken } from '../utils/api';\nimport { mockSimulationResponse } from '../data/mockSimulationData';\nimport InputPanel from '../components/simulate/InputPanel';\nimport SummaryCards from '../components/simulate/SummaryCards';\nimport TimeSeriesChart from '../components/simulate/TimeSeriesChart';\nimport EnergyMixChart from '../components/simulate/EnergyMixChart';\nimport CO2DonutChart from '../components/simulate/CO2DonutChart';\nimport SimilarPoliciesPanel from '../components/simulate/SimilarPoliciesPanel';\nimport DisclaimerBox from '../components/simulate/DisclaimerBox';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Simulate() {\n  _s();\n  const navigate = useNavigate();\n  const [inputs, setInputs] = useState({\n    country: '',\n    policyType: 'CARBON_TAX',\n    carbonPriceUSD: '',\n    durationYears: 5\n  });\n  const [results, setResults] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [apiError, setApiError] = useState(null);\n  const [useMockData, setUseMockData] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    setIsLoggedIn(!!token);\n  }, []);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setInputs(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Clear errors when user types\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n    setApiError(null);\n  };\n  const validateInputs = () => {\n    const newErrors = {};\n    if (!inputs.country || inputs.country.trim() === '') {\n      newErrors.country = 'Country is required';\n    }\n    if (!inputs.carbonPriceUSD || inputs.carbonPriceUSD <= 0) {\n      newErrors.carbonPriceUSD = 'Carbon price must be greater than 0';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async () => {\n    // Check if user is logged in\n    const token = getToken();\n    if (!token || !isLoggedIn) {\n      setApiError('Please login to run simulation.');\n      // Optionally redirect to login after 2 seconds\n      setTimeout(() => {\n        navigate('/login');\n      }, 2000);\n      return;\n    }\n    if (!validateInputs()) {\n      return;\n    }\n    setLoading(true);\n    setApiError(null);\n    setResults(null);\n    setUseMockData(false);\n    try {\n      // Prepare request body matching FastAPI contract\n      const requestBody = {\n        country: inputs.country,\n        policy_type: inputs.policyType === 'CARBON_TAX' ? 'Carbon Tax' : 'ETS',\n        carbon_price: parseFloat(inputs.carbonPriceUSD),\n        duration: parseInt(inputs.durationYears),\n        year: 2024\n      };\n      const response = await apiPost('/predict/all', requestBody);\n      if (!response.ok) {\n        // Handle error response\n        let errorMessage = 'Failed to get prediction';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.detail || errorData.message || errorMessage;\n        } catch (e) {\n          // If response is not JSON, use status text\n          errorMessage = response.statusText || errorMessage;\n        }\n        throw new Error(errorMessage);\n      }\n      const data = await response.json();\n\n      // Transform FastAPI response to match frontend expected format\n      const transformedData = transformApiResponse(data);\n      setResults(transformedData);\n      setUseMockData(false);\n      setApiError(null);\n    } catch (error) {\n      console.error('Simulation error:', error);\n      setApiError(error.message || 'Failed to connect to API. Please check if the backend is running.');\n      // Don't show mock data automatically - let user know there's an error\n      setUseMockData(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const transformApiResponse = apiData => {\n    var _apiData$inputs, _apiData$inputs2, _apiData$inputs3, _apiData$inputs4;\n    // Transform FastAPI response format to frontend expected format\n    const yearlyPredictions = apiData.yearly_predictions || [];\n    const firstYear = yearlyPredictions[0] || {};\n\n    // Calculate average revenue across all years\n    const averageRevenue = yearlyPredictions.length > 0 ? yearlyPredictions.reduce((sum, p) => sum + (p.revenue_million_usd || 0), 0) / yearlyPredictions.length : firstYear.revenue_million_usd || 0;\n\n    // Extract coverage from first year (if available)\n    const coverage = firstYear.coverage || null;\n    return {\n      inputs: {\n        country: ((_apiData$inputs = apiData.inputs) === null || _apiData$inputs === void 0 ? void 0 : _apiData$inputs.country) || inputs.country,\n        policyType: ((_apiData$inputs2 = apiData.inputs) === null || _apiData$inputs2 === void 0 ? void 0 : _apiData$inputs2.policy_type) === 'Carbon Tax' ? 'CARBON_TAX' : 'ETS',\n        carbonPriceUSD: ((_apiData$inputs3 = apiData.inputs) === null || _apiData$inputs3 === void 0 ? void 0 : _apiData$inputs3.carbon_price) || inputs.carbonPriceUSD,\n        durationYears: ((_apiData$inputs4 = apiData.inputs) === null || _apiData$inputs4 === void 0 ? void 0 : _apiData$inputs4.duration) || inputs.durationYears\n      },\n      predictions: {\n        emissionCoveragePct: coverage !== null ? coverage : 45.0,\n        // Use coverage from API or default\n        annualRevenueMillionUSD: averageRevenue,\n        confidence: {\n          coverageLow: coverage !== null ? coverage * 0.85 : 38.25,\n          coverageHigh: coverage !== null ? coverage * 1.15 : 51.75,\n          revenueLow: averageRevenue * 0.8,\n          revenueHigh: averageRevenue * 1.2\n        }\n      },\n      countryContext: {},\n      // FastAPI doesn't return this yet - you may need to add it\n      similarPolicies: [] // FastAPI doesn't return this yet - you may need to add it\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-container simulate-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-background\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cyber-earth-container\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: cyberEarthImage,\n          alt: \"Cyber Earth\",\n          className: \"cyber-earth\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-content-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-content\",\n        children: [/*#__PURE__*/_jsxDEV(InputPanel, {\n          inputs: inputs,\n          onInputChange: handleInputChange,\n          onSubmit: handleSubmit,\n          loading: loading,\n          errors: errors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), apiError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"api-error-notice\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: apiError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this), results && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"results-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"section-title\",\n              children: \"Simulation Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(SummaryCards, {\n              predictions: results.predictions,\n              countryContext: results.countryContext\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(DisclaimerBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"charts-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chart-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(TimeSeriesChart, {\n                  durationYears: results.inputs.durationYears,\n                  predictions: results.predictions,\n                  yearStart: 2024\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chart-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(EnergyMixChart, {\n                  countryContext: results.countryContext\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chart-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(CO2DonutChart, {\n                  predictions: results.predictions,\n                  countryContext: results.countryContext\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), results.similarPolicies && results.similarPolicies.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"similar-policies-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(SimilarPoliciesPanel, {\n                similarPolicies: results.similarPolicies\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)\n        }, void 0, false), !results && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page-description\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Configure key policy settings, duration, carbon price, and region. Generate real-time projections of how your climate strategy will affect both the environment and revenue.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"After running the simulation, Eco-Impact AI displays clear insights on emission coverage, revenue predictions, and CO\\u2082 coverage, supported by interactive charts for deeper analysis.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n}\n_s(Simulate, \"6ahislDbXdUxiBbLwnF6uSZlyP8=\", false, function () {\n  return [useNavigate];\n});\n_c = Simulate;\nexport default Simulate;\nvar _c;\n$RefreshReg$(_c, \"Simulate\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","cyberEarthImage","apiPost","getToken","mockSimulationResponse","InputPanel","SummaryCards","TimeSeriesChart","EnergyMixChart","CO2DonutChart","SimilarPoliciesPanel","DisclaimerBox","jsxDEV","_jsxDEV","Fragment","_Fragment","Simulate","_s","navigate","inputs","setInputs","country","policyType","carbonPriceUSD","durationYears","results","setResults","loading","setLoading","errors","setErrors","apiError","setApiError","useMockData","setUseMockData","isLoggedIn","setIsLoggedIn","token","localStorage","getItem","handleInputChange","e","name","value","target","prev","validateInputs","newErrors","trim","Object","keys","length","handleSubmit","setTimeout","requestBody","policy_type","carbon_price","parseFloat","duration","parseInt","year","response","ok","errorMessage","errorData","json","detail","message","statusText","Error","data","transformedData","transformApiResponse","error","console","apiData","_apiData$inputs","_apiData$inputs2","_apiData$inputs3","_apiData$inputs4","yearlyPredictions","yearly_predictions","firstYear","averageRevenue","reduce","sum","p","revenue_million_usd","coverage","predictions","emissionCoveragePct","annualRevenueMillionUSD","confidence","coverageLow","coverageHigh","revenueLow","revenueHigh","countryContext","similarPolicies","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onInputChange","onSubmit","yearStart","_c","$RefreshReg$"],"sources":["D:/Fyp/FYP-EcoImpact/frontend/src/pages/Simulate.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport cyberEarthImage from '../images/cyberearth.png';\r\nimport { apiPost, getToken } from '../utils/api';\r\nimport { mockSimulationResponse } from '../data/mockSimulationData';\r\nimport InputPanel from '../components/simulate/InputPanel';\r\nimport SummaryCards from '../components/simulate/SummaryCards';\r\nimport TimeSeriesChart from '../components/simulate/TimeSeriesChart';\r\nimport EnergyMixChart from '../components/simulate/EnergyMixChart';\r\nimport CO2DonutChart from '../components/simulate/CO2DonutChart';\r\nimport SimilarPoliciesPanel from '../components/simulate/SimilarPoliciesPanel';\r\nimport DisclaimerBox from '../components/simulate/DisclaimerBox';\r\n\r\nfunction Simulate() {\r\n  const navigate = useNavigate();\r\n  const [inputs, setInputs] = useState({\r\n    country: '',\r\n    policyType: 'CARBON_TAX',\r\n    carbonPriceUSD: '',\r\n    durationYears: 5\r\n  });\r\n  const [results, setResults] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [apiError, setApiError] = useState(null);\r\n  const [useMockData, setUseMockData] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    setIsLoggedIn(!!token);\r\n  }, []);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setInputs(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    // Clear errors when user types\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n    setApiError(null);\r\n  };\r\n\r\n  const validateInputs = () => {\r\n    const newErrors = {};\r\n    \r\n    if (!inputs.country || inputs.country.trim() === '') {\r\n      newErrors.country = 'Country is required';\r\n    }\r\n    \r\n    if (!inputs.carbonPriceUSD || inputs.carbonPriceUSD <= 0) {\r\n      newErrors.carbonPriceUSD = 'Carbon price must be greater than 0';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    // Check if user is logged in\r\n    const token = getToken();\r\n    if (!token || !isLoggedIn) {\r\n      setApiError('Please login to run simulation.');\r\n      // Optionally redirect to login after 2 seconds\r\n      setTimeout(() => {\r\n        navigate('/login');\r\n      }, 2000);\r\n      return;\r\n    }\r\n\r\n    if (!validateInputs()) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setApiError(null);\r\n    setResults(null);\r\n    setUseMockData(false);\r\n\r\n    try {\r\n      // Prepare request body matching FastAPI contract\r\n      const requestBody = {\r\n        country: inputs.country,\r\n        policy_type: inputs.policyType === 'CARBON_TAX' ? 'Carbon Tax' : 'ETS',\r\n        carbon_price: parseFloat(inputs.carbonPriceUSD),\r\n        duration: parseInt(inputs.durationYears),\r\n        year: 2024\r\n      };\r\n\r\n      const response = await apiPost('/predict/all', requestBody);\r\n\r\n      if (!response.ok) {\r\n        // Handle error response\r\n        let errorMessage = 'Failed to get prediction';\r\n        try {\r\n          const errorData = await response.json();\r\n          errorMessage = errorData.detail || errorData.message || errorMessage;\r\n        } catch (e) {\r\n          // If response is not JSON, use status text\r\n          errorMessage = response.statusText || errorMessage;\r\n        }\r\n        \r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      // Transform FastAPI response to match frontend expected format\r\n      const transformedData = transformApiResponse(data);\r\n      setResults(transformedData);\r\n      setUseMockData(false);\r\n      setApiError(null);\r\n    } catch (error) {\r\n      console.error('Simulation error:', error);\r\n      setApiError(error.message || 'Failed to connect to API. Please check if the backend is running.');\r\n      // Don't show mock data automatically - let user know there's an error\r\n      setUseMockData(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const transformApiResponse = (apiData) => {\r\n    // Transform FastAPI response format to frontend expected format\r\n    const yearlyPredictions = apiData.yearly_predictions || [];\r\n    const firstYear = yearlyPredictions[0] || {};\r\n    \r\n    // Calculate average revenue across all years\r\n    const averageRevenue = yearlyPredictions.length > 0\r\n      ? yearlyPredictions.reduce((sum, p) => sum + (p.revenue_million_usd || 0), 0) / yearlyPredictions.length\r\n      : firstYear.revenue_million_usd || 0;\r\n\r\n    // Extract coverage from first year (if available)\r\n    const coverage = firstYear.coverage || null;\r\n\r\n    return {\r\n      inputs: {\r\n        country: apiData.inputs?.country || inputs.country,\r\n        policyType: apiData.inputs?.policy_type === 'Carbon Tax' ? 'CARBON_TAX' : 'ETS',\r\n        carbonPriceUSD: apiData.inputs?.carbon_price || inputs.carbonPriceUSD,\r\n        durationYears: apiData.inputs?.duration || inputs.durationYears\r\n      },\r\n      predictions: {\r\n        emissionCoveragePct: coverage !== null ? coverage : 45.0, // Use coverage from API or default\r\n        annualRevenueMillionUSD: averageRevenue,\r\n        confidence: {\r\n          coverageLow: coverage !== null ? coverage * 0.85 : 38.25,\r\n          coverageHigh: coverage !== null ? coverage * 1.15 : 51.75,\r\n          revenueLow: averageRevenue * 0.8,\r\n          revenueHigh: averageRevenue * 1.2\r\n        }\r\n      },\r\n      countryContext: {}, // FastAPI doesn't return this yet - you may need to add it\r\n      similarPolicies: [] // FastAPI doesn't return this yet - you may need to add it\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-container simulate-page\">\r\n      <div className=\"page-background\">\r\n        <div className=\"cyber-earth-container\">\r\n          <img src={cyberEarthImage} alt=\"Cyber Earth\" className=\"cyber-earth\" />\r\n        </div>\r\n      </div>\r\n      <div className=\"page-content-wrapper\">\r\n        <div className=\"page-content\">\r\n          <InputPanel\r\n            inputs={inputs}\r\n            onInputChange={handleInputChange}\r\n            onSubmit={handleSubmit}\r\n            loading={loading}\r\n            errors={errors}\r\n          />\r\n\r\n          {apiError && (\r\n            <div className=\"api-error-notice\">\r\n              <p>{apiError}</p>\r\n            </div>\r\n          )}\r\n\r\n          {results && (\r\n            <>\r\n              <div className=\"results-section\">\r\n                <h2 className=\"section-title\">Simulation Results</h2>\r\n                \r\n                <SummaryCards\r\n                  predictions={results.predictions}\r\n                  countryContext={results.countryContext}\r\n                />\r\n\r\n                <DisclaimerBox />\r\n\r\n                <div className=\"charts-grid\">\r\n                  <div className=\"chart-wrapper\">\r\n                    <TimeSeriesChart\r\n                      durationYears={results.inputs.durationYears}\r\n                      predictions={results.predictions}\r\n                      yearStart={2024}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"chart-wrapper\">\r\n                    <EnergyMixChart countryContext={results.countryContext} />\r\n                  </div>\r\n\r\n                  <div className=\"chart-wrapper\">\r\n                    <CO2DonutChart\r\n                      predictions={results.predictions}\r\n                      countryContext={results.countryContext}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {results.similarPolicies && results.similarPolicies.length > 0 && (\r\n                  <div className=\"similar-policies-wrapper\">\r\n                    <SimilarPoliciesPanel similarPolicies={results.similarPolicies} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {!results && (\r\n            <div className=\"page-description\">\r\n              <p>\r\n                Configure key policy settings, duration, carbon price, and region. \r\n                Generate real-time projections of how your climate strategy will affect both the environment and revenue.\r\n              </p>\r\n              <p>\r\n                After running the simulation, Eco-Impact AI displays clear insights on emission coverage, \r\n                revenue predictions, and COâ‚‚ coverage, supported by interactive charts for deeper analysis.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Simulate;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}