{"ast":null,"code":"var _import$meta$env;\n/**\r\n * API Helper - Fetch wrapper with authentication\r\n * Handles API calls to the FastAPI backend with JWT token support\r\n */\n\n// Support both Vite (import.meta.env) and Create React App (process.env)\nconst API_BASE_URL = typeof import.meta !== 'undefined' && ((_import$meta$env = import.meta.env) === null || _import$meta$env === void 0 ? void 0 : _import$meta$env.VITE_API_BASE_URL) || process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\n\n/**\r\n * Get authorization token from localStorage\r\n */\nconst getToken = () => {\n  return localStorage.getItem('token');\n};\n\n/**\r\n * API request helper with authentication\r\n * @param {string} endpoint - API endpoint (e.g., '/predict/all')\r\n * @param {object} options - Fetch options\r\n * @returns {Promise<Response>}\r\n */\nexport const apiRequest = async (endpoint, options = {}) => {\n  const token = getToken();\n  const headers = {\n    'Content-Type': 'application/json',\n    ...options.headers\n  };\n\n  // Add Authorization header if token exists\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const url = endpoint.startsWith('http') ? endpoint : `${API_BASE_URL}${endpoint}`;\n  const config = {\n    ...options,\n    headers\n  };\n  try {\n    const response = await fetch(url, config);\n    return response;\n  } catch (error) {\n    console.error('API request failed:', error);\n    throw error;\n  }\n};\n\n/**\r\n * GET request helper\r\n */\nexport const apiGet = async (endpoint, options = {}) => {\n  return apiRequest(endpoint, {\n    ...options,\n    method: 'GET'\n  });\n};\n\n/**\r\n * POST request helper\r\n */\nexport const apiPost = async (endpoint, data, options = {}) => {\n  return apiRequest(endpoint, {\n    ...options,\n    method: 'POST',\n    body: JSON.stringify(data)\n  });\n};\n\n/**\r\n * PUT request helper\r\n */\nexport const apiPut = async (endpoint, data, options = {}) => {\n  return apiRequest(endpoint, {\n    ...options,\n    method: 'PUT',\n    body: JSON.stringify(data)\n  });\n};\n\n/**\r\n * DELETE request helper\r\n */\nexport const apiDelete = async (endpoint, options = {}) => {\n  return apiRequest(endpoint, {\n    ...options,\n    method: 'DELETE'\n  });\n};\nexport default {\n  apiRequest,\n  apiGet,\n  apiPost,\n  apiPut,\n  apiDelete,\n  getToken\n};","map":{"version":3,"names":["API_BASE_URL","import","meta","_import$meta$env","env","VITE_API_BASE_URL","process","REACT_APP_API_BASE_URL","getToken","localStorage","getItem","apiRequest","endpoint","options","token","headers","url","startsWith","config","response","fetch","error","console","apiGet","method","apiPost","data","body","JSON","stringify","apiPut","apiDelete"],"sources":["D:/Fyp/FYP-EcoImpact/frontend/src/utils/api.js"],"sourcesContent":["/**\r\n * API Helper - Fetch wrapper with authentication\r\n * Handles API calls to the FastAPI backend with JWT token support\r\n */\r\n\r\n// Support both Vite (import.meta.env) and Create React App (process.env)\r\nconst API_BASE_URL = \r\n  (typeof import.meta !== 'undefined' && import.meta.env?.VITE_API_BASE_URL) ||\r\n  process.env.REACT_APP_API_BASE_URL ||\r\n  'http://localhost:8000';\r\n\r\n/**\r\n * Get authorization token from localStorage\r\n */\r\nconst getToken = () => {\r\n  return localStorage.getItem('token');\r\n};\r\n\r\n/**\r\n * API request helper with authentication\r\n * @param {string} endpoint - API endpoint (e.g., '/predict/all')\r\n * @param {object} options - Fetch options\r\n * @returns {Promise<Response>}\r\n */\r\nexport const apiRequest = async (endpoint, options = {}) => {\r\n  const token = getToken();\r\n  \r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n    ...options.headers,\r\n  };\r\n\r\n  // Add Authorization header if token exists\r\n  if (token) {\r\n    headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n\r\n  const url = endpoint.startsWith('http') ? endpoint : `${API_BASE_URL}${endpoint}`;\r\n\r\n  const config = {\r\n    ...options,\r\n    headers,\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(url, config);\r\n    return response;\r\n  } catch (error) {\r\n    console.error('API request failed:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * GET request helper\r\n */\r\nexport const apiGet = async (endpoint, options = {}) => {\r\n  return apiRequest(endpoint, {\r\n    ...options,\r\n    method: 'GET',\r\n  });\r\n};\r\n\r\n/**\r\n * POST request helper\r\n */\r\nexport const apiPost = async (endpoint, data, options = {}) => {\r\n  return apiRequest(endpoint, {\r\n    ...options,\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\n/**\r\n * PUT request helper\r\n */\r\nexport const apiPut = async (endpoint, data, options = {}) => {\r\n  return apiRequest(endpoint, {\r\n    ...options,\r\n    method: 'PUT',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\n/**\r\n * DELETE request helper\r\n */\r\nexport const apiDelete = async (endpoint, options = {}) => {\r\n  return apiRequest(endpoint, {\r\n    ...options,\r\n    method: 'DELETE',\r\n  });\r\n};\r\n\r\nexport default {\r\n  apiRequest,\r\n  apiGet,\r\n  apiPost,\r\n  apiPut,\r\n  apiDelete,\r\n  getToken,\r\n};\r\n\r\n"],"mappings":";AAAA;AACA;AACA;AACA;;AAEA;AACA,MAAMA,YAAY,GACf,OAAOC,MAAM,CAACC,IAAI,KAAK,WAAW,MAAAC,gBAAA,GAAIF,MAAM,CAACC,IAAI,CAACE,GAAG,cAAAD,gBAAA,uBAAfA,gBAAA,CAAiBE,iBAAiB,KACzEC,OAAO,CAACF,GAAG,CAACG,sBAAsB,IAClC,uBAAuB;;AAEzB;AACA;AACA;AACA,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EACrB,OAAOC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AACtC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EAC1D,MAAMC,KAAK,GAAGN,QAAQ,CAAC,CAAC;EAExB,MAAMO,OAAO,GAAG;IACd,cAAc,EAAE,kBAAkB;IAClC,GAAGF,OAAO,CAACE;EACb,CAAC;;EAED;EACA,IAAID,KAAK,EAAE;IACTC,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUD,KAAK,EAAE;EAC9C;EAEA,MAAME,GAAG,GAAGJ,QAAQ,CAACK,UAAU,CAAC,MAAM,CAAC,GAAGL,QAAQ,GAAG,GAAGZ,YAAY,GAAGY,QAAQ,EAAE;EAEjF,MAAMM,MAAM,GAAG;IACb,GAAGL,OAAO;IACVE;EACF,CAAC;EAED,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACJ,GAAG,EAAEE,MAAM,CAAC;IACzC,OAAOC,QAAQ;EACjB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC3C,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAME,MAAM,GAAG,MAAAA,CAAOX,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACtD,OAAOF,UAAU,CAACC,QAAQ,EAAE;IAC1B,GAAGC,OAAO;IACVW,MAAM,EAAE;EACV,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,OAAO,GAAG,MAAAA,CAAOb,QAAQ,EAAEc,IAAI,EAAEb,OAAO,GAAG,CAAC,CAAC,KAAK;EAC7D,OAAOF,UAAU,CAACC,QAAQ,EAAE;IAC1B,GAAGC,OAAO;IACVW,MAAM,EAAE,MAAM;IACdG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI;EAC3B,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMI,MAAM,GAAG,MAAAA,CAAOlB,QAAQ,EAAEc,IAAI,EAAEb,OAAO,GAAG,CAAC,CAAC,KAAK;EAC5D,OAAOF,UAAU,CAACC,QAAQ,EAAE;IAC1B,GAAGC,OAAO;IACVW,MAAM,EAAE,KAAK;IACbG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI;EAC3B,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMK,SAAS,GAAG,MAAAA,CAAOnB,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACzD,OAAOF,UAAU,CAACC,QAAQ,EAAE;IAC1B,GAAGC,OAAO;IACVW,MAAM,EAAE;EACV,CAAC,CAAC;AACJ,CAAC;AAED,eAAe;EACbb,UAAU;EACVY,MAAM;EACNE,OAAO;EACPK,MAAM;EACNC,SAAS;EACTvB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}